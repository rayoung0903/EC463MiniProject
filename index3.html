
<!DOCTYPE html>
  <head>  
  	<title>Sensor Remote Access</title>  

  	<h1>Temperature Sensor Remote Access</h1>
  </head>
  <body>

  	<p>
  	<h3>Joaquin Giorgi & Ruiyang Shi</h3>
    
    <script src="plotly-latest.min.js"></script>

    <div id="myDiv">


    <script src="https://www.gstatic.com/firebasejs/5.0.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.0.0/firebase-database.js"></script>

    <script>

var config = {
    apiKey: "AIzaSyBPuwgdkzg-PIDfgOSkfb8z-WBGiT-Jvz0",
    authDomain: "sensorproject2.firebaseapp.com",
    databaseURL: "https://sensorproject2.firebaseio.com",
    projectId: "sensorproject2",
    storageBucket: "sensorproject2.appspot.com",
    messagingSenderId: "1099232876882"
  };

      firebase.initializeApp(config);


      // function UpdateGraph(array) {
      //   console.log("hey");
      //   console.log(array[0]);
      //   var tempTrace1 = {
      //     x: x1,
      //     y: array,
      //     type: 'scatter'
      //   }
      //   var data = [tempTrace1];
      //   Plotly.newPlot('myDiv', data);
      // }

      var x1 = [];
      
      var i;
      for (i = 0; i < 100; i++) {
        x1.push(i);
      }

      var userId = Math.floor(5*Math.random());
   
      var test = firebase.database().ref('users/' + userId + '/temp_array');
   
      test.on("value", function(snapshot){
        //window.alert(snapshot.val());
        var y11 = snapshot.val();
        var x11 = x1;
        UpdateGraph(x11, y11);
      });


    	//var graphTimer = setInterval(updateSensor, 500);

    	var x1 = [];
    	var y1 = [];
      
      var i;
    	for (i = 0; i < 100; i++) {
    		x1.push(i);
    		y1.push(19 + Math.random());
    	}
    
      function UpdateGraph(x11, y11) {
        console.log("hey");

        var tempTrace1 = {
          x: x11,
          y: y11,
          type: 'scatter'
        }
        var data = [tempTrace1];
        Plotly.newPlot('myDiv', data);
      }
    
  

    </script>


   </div>

  <script src="buttonfunction.js"></script>

  <button type="button" onclick=SignOut()>Sign Out</button>

  </body>	

</html>
